Rm9yZSA9IGNvbG9yYW1hLkZvcmU7Y29sb3JhbWEuaW5pdChhdXRvcmVzZXQ9VHJ1ZSkKTWVzc2FnZUJveCA9IGN0eXBlcy53aW5kbGwudXNlcjMyLk1lc3NhZ2VCb3hXCmNsZWFyID0gbGFtYmRhIDogc3VicHJvY2Vzcy5jYWxsKCdjbHN8fGNsZWFyJywgc2hlbGw9VHJ1ZSkKb3Muc3lzdGVtKCdweXRob24uZXhlIC1tIHBpcCBpbnN0YWxsIHB5c29ja3MnKQpvcy5zeXN0ZW0oJ3B5dGhvbi5leGUgLW0gcGlwIGluc3RhbGwgLVUgcmVxdWVzdHNbc29ja3NdJykKdHJ5OgogICAgaW1wb3J0IHJlcXVlc3RzCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIG9zLnN5c3RlbSgncHl0aG9uLmV4aWUgLW0gcGlwIGluc3RhbGwgcmVxdWVzdHMnKQogICAgaW1wb3J0IHJlcXVlc3RzCgp0cnk6CiAgICBpbXBvcnQgY29sb3JhbWEKZXhjZXB0IEltcG9ydEVycm9yOgogICAgb3Muc3lzdGVtKCdweXRob24uZXhlIC1tIHBpcCBpbnN0YWxsIGNvbG9yYW1hJykKICAgIGltcG9ydCBjb2xvcmFtYQoKdHJ5OgogICAgaW1wb3J0IGF1dG9weQpleGNlcHQgSW1wb3J0RXJyb3I6CiAgICBvcy5zeXN0ZW0oJ3B5dGhvbi5leGUgLW0gcGlwIGluc3RhbGwgYXV0b3B5JykKICAgIGltcG9ydCBhdXRvcHkKCmNsZWFyKCkKY29sb3JhbWEuaW5pdCgpCgpjbGFzcyBUSFJJRElORzoKCiAgICBkZWYgX19pbml0X18oc2VsZiwgdGFyZ2V0KToKICAgICAgICBzZWxmLnRocmVhZHNfbGlzdCA9IFtdCiAgICAgICAgc2VsZi50YXJnZXQgPSB0YXJnZXQKCiAgICBkZWYgZ2VuKHNlbGYsIHRocmVhZHMpOgogICAgICAgIGZvciBpIGluIHJhbmdlKHRocmVhZHMpOgogICAgICAgICAgICB0ID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9KHNlbGYudGFyZ2V0KSkKICAgICAgICAgICAgdC5zZXREYWVtb24oVHJ1ZSkKICAgICAgICAgICAgc2VsZi50aHJlYWRzX2xpc3QuYXBwZW5kKHQpCgogICAgICAgIHJldHVybiBzZWxmLnRocmVhZHNfbGlzdAoKICAgIGRlZiBzdGFydChzZWxmKToKICAgICAgICBmb3IgdGhyZWFkX3N0YXJ0IGluIHNlbGYudGhyZWFkc19saXN0OgogICAgICAgICAgICB0aHJlYWRfc3RhcnQuc3RhcnQoKQoKICAgIGRlZiBqb2luKHNlbGYpOgogICAgICAgIGZvciB0aHJlYWRfam9pbiBpbiBzZWxmLnRocmVhZHNfbGlzdDoKICAgICAgICAgICAgdGhyZWFkX2pvaW4uam9pbigpCgoKY2xhc3MgREVTSUdOOgogICAgV0hJVEUgPSAnXHgxYlsxOzM3OzQwbScKICAgIFlFTExPVyA9ICdceDFiWzE7MzM7NDBtJwogICAgUkVEID0gJ1x4MWJbMTszMTs0MG0nCiAgICBCTFVFID0gJ1x4MWJbMzZtXHgxYls0MG0nCiAgICBHUkVFTiA9ICdceDFiWzMybVx4MWJbNDBtJwogICAgZ3JlZW5wbHVzID0gZiJ7V0hJVEV9WyB7R1JFRU59K3tXSElURX0gXSIKICAgIGJsdWVwbHVzID0gZiJ7V0hJVEV9WyB7QkxVRX0re1dISVRFfSBdIgogICAgcmVkbWludXMgPSBmIntXSElURX1bIHtSRUR9LXtXSElURX0gXSIKICAgIGJsdWVwcm94aWVzID0gZiJ7V0hJVEV9WyB7QkxVRX1QUk9YSUVTIHtXSElURX1dIgogICAgcmVkcHJveGllcyA9IGYie1dISVRFfVsge1JFRH1QUk9YSUVTIHtXSElURX1dIgogICAgYmx1ZWFjY291bnRzID0gZiJ7V0hJVEV9WyB7QkxVRX1BQ0NPVU5UUyB7V0hJVEV9XSIKICAgIHJlZGFjY291bnRzID0gZiJ7V0hJVEV9WyB7UkVEfUFDQ09VTlRTIHtXSElURX1dIgogICAgYmx1ZXplcm8gPSBmIntXSElURX1bIHtCTFVFfTAge1dISVRFfV0iCiAgICBibHVlb25lID0gZiJ7V0hJVEV9WyB7QkxVRX0xIHtXSElURX1dIgogICAgYmx1ZXR3byA9IGYie1dISVRFfVsge0JMVUV9MiB7V0hJVEV9XSIKICAgIHhyYmx1ZSA9IGYiXG57Ymx1ZXBsdXN9IDE0RGF5IEJ5cGFzcyB7QkxVRX0vIHtZRUxMT1d9SW5zdGFncmFtID4gQG9sLmoge1lFTExPV306IEJ5IENyYXp5e1dISVRFfSIKCgphY3RpdmUgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vYXBpLmlwaWZ5Lm9yZy8
